# 도메인 복잡성 관리

조직 규모에 따라 도메인 전문가의 멘탈 모델은 일관성이 없을 수 있다.

같은 비즈니스 도메인에서도 도메인 전문가마다 서로 다른 모델을 사용할 수 있다.

<br/>

## 일관성 없는 모델

회사의 마케팅 부서는 온라인 광고를 통해 리드(lead)를 생성한다.

도메인 전문가의 언어를 살펴보면 특이한 점이 있다. 리드라는 용어가 마케팅과 영업 부서에서 서로 다른 의미로 사용된다.

##### 마케팅 부서

```
마케팅 담당자에게 리드는 누군가가 제품 중 하나에 관심이 있다는 알림을 나타낸다. 잠재고객의 연락처 정보를 수신하는 이벤트는 리드로 간주된다.
```

##### 영업 부서

```
영업 부서 컨텍스트에서 리드는 훨씬 더 복잡하다. 리드는 영업 프로세스의 전체 수명주기를 나타낸다. 리드는 단순한 이벤트가 아니라 장기적으로 진행되는 과정이다.
```

다른 부서의 사람들 사이에서 의사소틍은 더 어려울 수 있지만, 사람들이 서로 상호작용하면서 정확한 의미를 추론하는 것은 쉽다.

하지만 다양한 비즈니스 도메인 모델을 소프트웨어로 표현하는 것은 더 어렵다.

<br/>

## 바운디드 컨텍스트란 무엇인가?

유비쿼터스 언어를 여러 개의 작은 언어로 나눈 다음 각 언어를 적용할 수 있는 명시적인 **바운디드 컨텍스트**에 할당하면 된다.

각 다운디드 컨텍스트에서 단일 의미를 갖는 한, 세분화된 유비쿼터스 언어 각가의 일관성을 띠며 도메인 전문가의 멘탈 모델을 따를 수 있다.

어떤 의미에서 용어 충돌과 암시적 컨텍스트는 적당한 규모의 모든 비즈니스에 내재된 부분이다.

바운디드 컨텍스트 패턴을 사용하면 컨텍스트를 명시적이고 중요한 비즈니스 도메인의 요소로 모델링할 수 있다.

<br/>

#### 모델 경계

모델은 경계 없이 존재할 수 없다. 경계가 없다면 현실 세계의 복제본처럼 확장될 것이다.

하나의 바운디드 컨텍스트의 유비쿼터스 언어는 다른 바운디드 컨텍스트의 범위에는 완전히 관련이 없다.

바운디드 컨텍스트는 유비쿼터스 언어와 해당 언어가 나타내는 모델의 적용 가능성을 규정한다.

바운디드 컨텍스트는 유비쿼터스 언어의 일관성이 유지되는 경계다.

유비쿼터스 언어의 용어, 원칙, 비즈니스 규칙은 해당 바운디드 컨텍스트 내에서만 일관성이 있다.

<br/>

#### 정제된 유비쿼터스 언어

유비쿼터스 언어는 조직 전체에서 '유비쿼터스'하게 사용하고 적용돼야 한다는 의미에서 '유비쿼터스'가 아니다. 유비쿼터스 언어는 만능이 아니다.

유비쿼터스 언어는 바운디드 컨텍스트 경계 안에서만 보편적으로 적용된다.

모델은 우리가 해결해야 하는 문제 없이는 존재할 수 없기 때문에 유비쿼터스 언어는 명시적으로 적용 가능한 컨텍스트 없이 정의하거나 사용할 수 없다.

<br/>

#### 바운디드 컨텍스트의 범위

비즈니스 도메인을 모델링하기 위해 우리는 모델을 분할하고, 각 세분화된 모델에 적용 가능한 컨텍스트를 엄격하게 정의해야 했다.

경계는 비즈니스 도메인의 고유한 컨텍스트에 따라 넓힐 수 있고, 비즈니스 도메인을 더 작은 문제 도메인으로 세분화하여 좁힐 수도 있다.

모델 크기에 정답은 없지만 모델 자체로 유용해야 한다.

바운디드 컨텍스트의 범위를 작게 만들기 위해 노력하는 것은 역효과를 낼 수 있다.

바운디드 컨텍스트의 크기에 대한 결정은 문제 도메인이 무엇이냐에 따라 달라진다.

응집된 기능을 여러 바운디드 컨텍스트로 분할하는 것은 각 컨텍스트가 독립적으로 발전하는 능력을 저해한다.

<br/>

## 바운디드 컨텍스트 대 하위 도메인

처음에는 비즈니스 도메인을 분해하는 두 가지 방법이 중복으로 보일 수 있다. 하지만 그렇지 않다. 

<br/>

#### 하위 도메인 

소프트웨어 엔지니어로서 우리는 요구사항을 정의하지 않는다. 비즈니스가 담당한다.

소프트웨어 엔지니어는 하위 도메인을 식별하기 위해 비즈니스 도메인을 분석한다.

<br/>

#### 바운디드 컨텍스트

소프트웨어 엔지니어에 의해 설계된다.

우리는 비즈니스 도메인을 더 작고 관리 가능한 문제 도메인으로 어떻게 나눌지 정한다.

<br/>

#### 하위 도메인과 바운디드 컨텍스트 사이의 상호작용

비현실적이지만 이론적으로는 단일 모델이 전체 비즈니스 도메인에 적용될 수 있다.

모델이 충돌하면 도메인 전문가의 멘탈 모델을 따라 시스템을 바운디드 컨텍스트로 분해할 수 있다.

모델이 여전히 크고 유지보수하기 어려운 경우 더 작은 바운디드 컨텍스트로 분해할 수 있다.

하위 도메인은 비즈니스 전략에 의해 정의된다.

바운디드 컨텍스트와 하위 도메인의 설계를 일대일 관계로 제한하면 이런 식의 유연성이 떨어지고 바운디드 컨텍스트 안에서 하나의 하위 도메인 모델만을 사용하게 된다.

<br/>

## 경계

바운디드 컨텍스트 패턴은 물리적 경계와 소유권 경계를 규정하기 위한 도메인 주도 설계 도구다.

<br/>

#### 물리적 경계

바운디드 컨텍스트 간의 명확한 물리적 경계를 통해 각 바운디드 컨텍스트를 요구사항에 가장 적합한 기술 스택으로 구현할 수 있다.

바운디드 컨텍스트는 물리적 경계고 하위 도메인은 논리적 경계다.

<br/>

#### 소유권 경계

팀은 서로 다른 바운디드 컨텍스트로 분리된 모델과 시스템을 명시적으로 연동하기 위한 통신 프로토콜을 정의해야 한다.

팀과 바운디드 컨텍스트 간의 관계는 단방향이다. 바운디드 컨텍스트는 한 팀만 소유해야 한다.

<br/>

## 실생활의 바운디드 컨텍스트

소프트웨어 엔지니어는 도메인 전문가가 다양한 비즈니스 엔티티와 프로세스에 대해 어떻게 생각하는지 의식해야 한다.

소프트웨어에서 비즈니스 도메인을 모델링할 때 바운디드 컨텍스트가 있을 뿐만 아니라 다른 컨텍스트에서 다른 모델을 사용한다는 개념이 일반적으로 널리 퍼져 있다.

<br/>

#### 시맨틱 도메인

시멘틱 도메인은 의미와 영역과 해당 의미를 전달하기 위해 사용하는 단어 영역으로 구분한다.

<br/>

#### 과학

```
"과학자들은 일반적으로 어떤 이론도 100% 정확하지 않다는 데 동의한다. 그러므로 지식의 진정한 시험은 진리가 아니라 효용이다."
																							-유발 노아 하라리
```

모든 경우에 맞는 과학적 이론은 없다.

뉴턴의 운동 법칙에 따르면 공간과 시간은 절대적이다. 그것은 물체의 움직임이 일어나는 단계다. 아인슈타인의 상대성 이론에서 공간과 시간은 더 이상 절대적이지 않고 관찰자에 따라 다르다.

두 모델은 모순되는 것처럼 보일 수 있지만 둘 다 적절한 (바운디드) 컨텍스트에서 유용하다.

<br/>

#### 냉장고 구입

각 모델에는 엄격한 바운디드 컨텍스트가 있다.

모델은 당면한 직업과 관련 없는 정보는 생략해야 한다.

<br/>

## 결론  

도메인 전문가의 멘탈 모델에 내재된 충돌을 발견할 때마다 유비쿼터스 언어를 여러 개 바운디드 컨텍스트로 분해해야 한다.

유비쿼터스 언어는 바운디드 컨텍스트의 범위 내에서 일관성이 있어야 한다.

하위 도메인이 발견되면 바운디드 컨텍스트도 설계한다. 도메인을 바운디드 컨텍스트로 나누는 것은 전략적 설계의 의사결정이다.

바운디드 컨텍스트와 유비쿼터스 언어는 한 팀에서 만들고 유지보수할 수 있다. 두 팀이 동일한 바운디드 컨텍스트에서 작업을 공유할 수 없다.

각 바운디드 컨텍스트의 생명주기는 서로 독립적이다.

<br/>

# 느낀점

바운디드 컨텍스트에 대해서 자세하게 알게 되었다.
