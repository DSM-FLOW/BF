# 비즈니스 도메인 분석하기

도메인 주도 설계는 복잡한 문제를 해결하고 우아한 솔루션을 만들고 신중하게 규칙과 구조, 행동을 만들어서 완전히 새로운 세상을 건설한다.

효과적인 솔루션을 설계하고 구축하기 위해서는 그것의 바탕이 되는 문제(구축해야 하는 소프트웨어 시스템)를 이해해야 한다. 그렇다면 비즈니스 전략과 소프트웨어를 만들면서 얻고자 하는 가치를 이해해야 한다.

<br/>

## 비즈니스 도메인이란?

> 비즈니스 도메인은 기업의 주요 활동 영역을 정의한다.

회사가 고객에게 제공하는 서비스를 말한다.

```
ex) 스타벅스는 커피를 제공한다.
```

회사가 비즈니스 도메인을 자주 변경할 수 있다는 점도 주목해야한다.

```
ex) 노키아는 수년에 걸쳐 목재 가공, 고무 제조, 통신, 모바일 등 다양한 분야의 비즈니스 도메인을 운영했다.
```

<br/>

## 하위 도메인이란?

> 하위 도메인은 비즈니스 활동의 세분화된 영역이다.

비즈니스 도메인의 목표를 달성하기 위해 기업은 여러가지 **하위 도메인**을 운영한다.

모든 하위 도메인은 고객에게 제공하는 서비스 단위로 비즈니스 도메인을 만든다.

각각의 하위 도메인은 회사의 비즈니스 도메인에서 목표를 달성하기 위해 서로 상호작용 해야한다.

```
ex) 스타벅스는 커피로 가장 잘 알려져 있지만, 성공적인 커피 체인점을 만드는 일은 훌룡한 커피를 만드는 방법을 이해하는 것 이상의 활동이 필요하다. 
```

이러한 하위 도메인중 어느 것도 자체적으로 수익을 낼 수는 없다. 회사가 해당 비즈니스 도메인에서 경쟁하려면 모든 것이 함께 필요하다.

<br/>

### 하위 도메인의 유형

> 하위 도메인은 서로 다른 전략적 비즈니스 가치를 가진다.

- **핵심**

  - **핵심 하위 도메인**은 회사가 경쟁업체와 다르게 수행하고 있는 것을 말한다.

    ```
    ex) 새로운 제품과 서비스 발명, 기존 프로세스를 최적화하여 비용 절감
    ```

    **복잡성**: 구현하기 쉬운 핵심 하위도메인은 일시적인 경쟁 우위만을 제공할 수 있다. 따라서 핵심하위 도메인은 자연스럽게 복잡해진다.

  - **경쟁 우위의 원천**: 하위도메인이 반드시 기술이 들어가는것은 아니다. 회사의 경쟁 우위는 다양한 원천에서 나올 수 있다.

    ```
    ex) 온라인 보석 제조업체의 온라인 쇼핑몰은 중요하지 않고 보석 디자인이 핵심 하위 도메인이다. 기존 온라인 쇼핑 엔진을 사용할 수 있지만, 보석디자인을 하청할 수는 없다.
    ```

- **일반**

  - **일반 하위 도메인**은 모든 회사가 같은 방식으로 수행하는 비즈니스 활동을 말한다. 이 도메인은 회사에 경쟁력을 제공하지 않는다. 모든 회사가 사용하고 있어서 더 이상 혁신이나 최적화가 필요 없다.

    ```
    ex) 거의 모든 시스템은 사용자 인증과 권한 부여가 필요하다. 이때 전용 인증 메커니즘을 발명하는 것보다 기존에 솔루션을 사용하는게 더 합리적이다. 
    ```

- **지원**

  - **지원 하위 도메인은**은 회사의 비즈니스를 지원하는 활동을 말한다. 그러나 핵심 하위 도메인과는 달리 지원 하위 도메인은 어떠한 경쟁 우위도 제공하지 않는다.

    ```
    ex) 온라인 광고 회사에서 성공하려면 창의적인 카탈로그를 만들어야 한다. 창의적인 랜딩 페이지와 배너는 수익에 영향을 주지는 않는다 하지만 회사 시스템을 구현하는데는 필수다. 이는 콘텐츠 카탈로그 솔루션을 회사의 지원 하위 도메인 중 하나로 만든다.
    ```

  - 지원 하위 도메인의 차별되는 특징은 솔루션의 비즈니스 로직의 복잡성이다. 지원 하위 도메인의 비즈니스 로직은 대부분 데이터 ETL작업 즉 CRUD를 말한다. 이러한 활동 영역은 회사에 어떠한 경쟁 우위도 제공하지 않으므로 높은 진입장벽이 필요하지 않다.

<br/>

### 하위 도메인 비교

#### 경쟁 우위

- **핵심 하위 도메인**만이 회사에 경쟁 우위를 제공한다. (경쟁사와 차별화 하기 위한 회사의 전략)
- **일반 하위 도메인**은 경쟁 업체와 동일한 솔루션을 사용한다.
- **지원 하위 도메인**은 진입장벽이 낮고 경쟁 우위도 제공할 수 없다.
  - 이는 업계 경쟁력에 영향을 주지 않기 때문에 다른 회사가 복제해도 크게 신경 쓰지 않는다.
  - 이미 만들어진 일반적인 솔루션 사용을 선호한다.

회사가 해결할 수 있는 문제가 더 복잡할수록 더 많은 비즈니스 가치를 제공할 수 있다.

복잡한 문제는 소비자에게 서비스를 제공하는 것에 국한되지 않는다.

복잡한 문제를 해결하면 비즈니스를 더욱 최적화하고 효율적으로 만들 수 있다.

또한 경쟁업체와 동일 수준의 서비스를 더 낮은 운영 비용으로 제공하는 것으로 경쟁 우위를 얻을 수 있다.

#### 복잡성

하위 도메인 유형에 따라 복잡성의 수준이 다르기 때문에 조직의 하위 도메인을 식별하는 것이 중요하다.

**일반 하위 도메인**은 훨씬더 복잡하다. 다른 사람들이 이미 이러한 문제를 해결하는 데 시간과 노력을 투자한 데는 그럴 만한 이유가 있다.

이러한 솔루션은 간단하지도, 사소하지도 않다.

**핵심 하위 도메인**은 복잡하다. 회사의 수익성이 좌우되기 때문에 경쟁업체가 모방하기 어려워야 한다.

그래서 회사는 전략적으로 핵심 하위 도메인으로 복잡한 문제를 해결하려고 한다.

```
ex) 기꺼이 비용을 지불할 의사가 있는가? 이것은 핵심 하위 도메인
외부 솔루션을 연동하는 것보다 자체 솔루션을 구현하는 것이 더 간단하고 저렴하다? 이것은 지원 하위 도메인
```

#### 변동성

**핵심 하위 도메인**은 자주 변경될 수 있다. 한번의 시도로 문제가 해결된다면 경쟁자들이 따라잡을 수 있기 때문이다.

**지원 하위 도메인**은 경쟁 우위도 제공하지 않고 핵심 하위 도메인과 투자한 동일한 노력에 비해 아주 작은 비즈니스 가치를 제공한다.

**일반 하위 도메인**은 보안, 버그 수정등 일반적 문제에 대한 완전히 새로운 솔루션으로 변경될 수 있다.

#### 솔루션 전략

**핵심 하위 도메인**은 솔루션을 구매하거나 외부에서 도입할 수 없다. 경쟁우위 개념을 약화 시킬수 있기 때문이다.

**핵심 하위 도메인**의 요구사항은 자주 그리고 지속적으로 변경될 것으로 예상되므로 유지보수가 가능하고 쉬워야 한다.

**지원 하위 도메인**은 비즈니스 로직이 단순하고 변경의 빈도가 적기 때문에 원칙을 생략 가능하다.

| 하위 도메인 유형 | 경쟁 우위 | 복잡성 | 변동성 | 구현 방식      | 문제     |
| ---------------- | --------- | ------ | ------ | -------------- | -------- |
| 핵심             | 예        | 높음   | 높음   | 사내 개발      | 흥미로움 |
| 일반             | 아니오    | 높음   | 낮음   | 구매/도입      | 해결됨   |
| 지원             | 아니오    | 낮음   | 낮음   | 사내 개발/하청 | 뻔함     |

<br/>

### 하위 도메인 경계 식별

하위 도메인과 해당 유형을 식별하면 소프트웨어 솔루션을 구축할 때 설계와 관련된 의사결정에 상당한 도움이 된다.

하위 도메인과 그 유형은 기업의 비즈니스 전략에 따라 정의되며, 이는 동일한 분야에서 다른 회사와 경쟁하기 위해 자신을 차별화 하는 방법이다.

하위 도메인을 식별하고 분류하려면 도메인 분석을 직접 수행해야 한다.

####  하위 도메인 정제

크게 나는 하위 도메인은 좋은 출발점이지만, 문제는 세부 사항에 있다. 비즈니스 기능의 복잡한 내용에 숨겨진 중요한 정보를 놓치지 않아야 한다.

#### 응집된 유스케이스를 하위 도메인으로

기술적인 관점에서 하위 도메인은 상호 연관되고 응집된 유스케이스의 집합과 유사하다.

이러한 유스케이스 집합에서는 보통 동일한 행위자(actor), 비즈니스 엔티티(business entity)를 포함하고 모두 밀접하게 관리된 데이터의 집합을 다룬다.

세분화된 하위 도메인을 찾는 것을 중단하는 시점을 결정하기 위한 지침으로 '응집된 유스케이스의 집한인 하위 도메인'이라는 정의를 사용할 수 있다.

이것은 하위 도메인의 가장 정확한 경계가 된다.

#### 핵심에 집중

하위 도메인은 소프트웨어 설계 의사결정을 내리는 프로세스의 어려움을 쉽게 해결하도록 돕는 도구다.

모든 조직에는 경쟁 우위를 제공하지만 소프트웨어와는 아무 관련이 없는 비즈니스 기능이 꽤나 많다.

하위 도메인을 찾을 때 소프트웨어와 관련되지 않은 비즈니스 기능을 식별하고, 그 자체로 인정하며, 작업 중인 소프트웨어 시스템과 관련된 비즈니스에 집중하는 것이 중요하다.

<br/>

## 도메인 분석 예제

하위 도메인의 개념을 실제로 적용해서 여러 전략적 설계 의사결정을 하는 데 활용하는 방법으로 알아보자

#### Gigmaster - 티켓 판메 및 유통 회사

##### 핵심 하위 도메인

- 추천 엔진
- 데이터 익명화
- 모바일 앱

##### 일반 하위 도메인

- 암호화 - 모든 데이터 암호화
- 회계 - 회사가 영업을 하고 있기 때문
- 정산 - 고객에게 청구
- 인증 및 권한 부여 - 사용자 식별

##### 지원 하위 도메인

- 음악 스트리밍 서비스와 연동
- 소셜 네트워크와 연동
- 참석 공연 모듈

#### BusVNext - 대중교통 회사

##### 핵심 하위 도메인

- 라우팅
- 분석
- 모바일 앱 사용자 경험
- 차량 관리

##### 일반 하위 도메인

- 교통 상황
- 회계
- 청구
- 권한 부여

##### 지원 하위 도메인

- 프로모션과 할인 관리 모듈

<br/>

### 설계 의사결정

작동 중인 하위 도메인과 해당 유형 간의 차이점을 알면 이미 몇 가지 전략적인 설계 의사결정을 내릴 수 있다.

- 라우팅 알고리즘, 데이터 분석, 차량 관리, 앱 사용성은 가장 정교한 기술 도구와 패턴을 사용해서 사내에서 개발해야한다.
- 판촉 관리 모듈의 구현은 외부에 위탁할 수 있다.
- 교통 상황 식별, 사용자 권한 관리, 재무 및 거래 기록 관리는 외부 서비스 제공 업체에 맡길 수 있다.

<br/>

## 도메인 전문가는 어떤 사람인가?

> 우리가 모델링하고 코드로 구현할 비즈니스의 모든 복잡성을 알고 있는 주제 전문가다.

즉, 도메인 전문가는 소프트웨어의 비즈니스 도메인에 대한 권위자다.

도메인 전문가는 요구사항을 수집하는 분석가도 시스템을 설계하는 엔지니어도 아니다. 도메인 전문가는 비즈니스를 대표한다.

이들은 모든 비즈니스 지식의 근원이 되는 비즈니스 문제를 처음으로 파악한 사람들이다.

일반적으로 요구사항을 제시하는 사람 또는 소프트웨어의 최종 사용하다.

<br/>

## 결론

비즈니스 활동을 이해하기 위한 도메인 주도 설계 도구를 다루었다. 

비즈니스가 운영되는 영역과 고객에게 제공하는 서비스는 모두 비즈니스 도메인과 함께 시작한다.

**핵심 하위 도메인**- 흥미로운 문제들. 기업이 경쟁자로부터 차별화하고 경쟁 우위를 얻는 활동이다.

**일반 하위 도메인** - 해결된 문제들. 이것은 모든 회사가 같은 방식으로 하고 있는일이다. 여기에는 혁신이 필요하지 않다. 사내 솔루션 개발 보다는 기존 것을 사용하는게 더 효과적이다.

**지원 하위 도메인** - 분명한 해결책이 있는 문제들. 사내에서 구현해야 하는 활동이지만 경쟁의 우위를 제공하지는 않는다.

**도메인 전문가**는 비즈니스의 주제 전문가이다.

<br/>

# 느낀점

비즈니스 활동을 이해하기 위해서 도메인 주도 설계가 중요하다는 것을 알게 되었다.

비즈니스 도메인과 하위 도메인에 대해서 잘 알게 되었다. 

