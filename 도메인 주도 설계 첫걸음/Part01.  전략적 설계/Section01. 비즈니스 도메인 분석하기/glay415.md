# Part 1 전략적 설계

> **"우리가 해결하고자 하는  문제가 무엇인지 합의하기 전에 해결책을 얘기하는 것은 의미가 없다. **
> **또한 해결책에 대해 합의하기 전에 어떻게 구현하는지 얘기하는 것도 의미가 없다." **
> **- 에프랏 골드랫-아쉬라그(EFRAT Goaldratt-Ashlag)**

- 전략적 설계 관점으로 본 DDD는 우리가 어떤 소프트웨어를 만드는지, 그리고 왜 그 소프트웨어를 만드는지에 대한 해답을 찾는 것이다.



### 01 _ 비즈니스 도메인 분석하기

---

**우리가 효과적인 솔루션을 설계하고 구축하기 위해서는 비즈니스 전략과 소프트웨어를 만들면서 얻고자 하는 가치에 대해 고심해 봐야 한다.**

- 이번 장에서는 기업의 비즈니스 도메인과 구조를 분석하기 위한 도구로서 도메인 주도 설계를 배우게 될 것이다.

- 이러한 내용은 소프트웨어 설계의 기초가 된다.



#### 비즈니스 도메인이란?

---

**비즈니스 도메인은 기업의 주요 활동 영역을 정의한다. 일반적으로 말하면 회사가 고객에게 제공하는 서비스를 말한다.**

- 기업은 여러 도메인을 운영할 수 있다.
- 회사는 비즈니스 도메인을 자주 변경할 수 있다.



#### 하위 도메인이란?

---

**비즈니스 도메인의 목표를 달성하기 위해 기업은 여러가지 하위 도메인을 운영해야 한다. 하위 도메인은 비즈니스 활동의 세분화된 영역이다.**

- 모든 회사의 하위 도메인은 고객에게 제공하는 서비스 단위로 비즈니스 도메인을 만든다.
- 하위 도메인은 전체 시스템에서 하나의 구성요소일 뿐이다.
- 회사의 비즈니스 도메인에서 목표를 달성하기 위해 서로 상호작용해야 한다.



#### 하위 도메인의 유형

---

**소프트웨어 시스템이 다양한 아키텍처 구성요소로 이뤄진 것처럼, 하위 도메인은 서로 다른 전략적 비즈니스 가치를 가진다.**

이를 핵심, 일반, 지원 세 가지 유형으로 구분한다.



##### 핵심 하위 도메인(core subdomain)

``핵심 하위 도메인``은 회사가 경쟁업체와 다르게 수행하고 있는 것을 말한다.

- **구현하기 쉬운** 핵심 하위 도메인은 **일시적인 경쟁 우위**만을 제공할 수 있다. 따라서 핵심 하위 도메인은 자연스럽게 **복잡**해 진다.

- 핵심 하위 도메인에 반드시 **기술**이 들어가야 하는 것은 아니다. **회사의 경쟁 우위**는 다양한 **원천**에서 나올 수 있다.



##### 일반 하위 도메인(generic subdomain)

``일반 하위 도메인``은 모든 회사가 같은 방식으로 수행하는 비즈니스 활동을 말한다.

- 일반 하위 도메인은 일반적으로 **복잡하고 구현하기 어렵다**. 그러나 회상에 **경쟁력을 제공하지는 않는다**.



##### 지원 하위 도메인(supporting subdomain)

``지원 하위 도메인``은 회사의 비즈니스를 지원하는 활동을 말한다.

- 지원 하위 도메인은 회사에 어떠한 **경쟁 우위도 제공하지 않는다**. 고로 높은 **진입장벽이 필요하지 않다**.
- 지원 하위 도메인의 **차별**되는 특징은 솔루션의 **낮은 복잡성**이다.



#### 하위 도메인 비교

---

##### 경쟁 우위

회사는 해결할 수 있는 문제가 더 복잡할수록 더 많은 비즈니스 가치를 제공할 수 있다. 또한 경쟁업체와 동일한 수준의 서비스를 더 낮은 운영 비용으로 제공하는 것으로 경쟁 우위를 얻을 수 있다.

- ``지원 하위 도메인``은 진입장벽이 낮고 경쟁우위도 제공할 수 없다.  업계 경쟁력에 영향을 주지않기에 경쟁사가 지원 하위 도메인을 복제해도 별 신경쓰지 않는다.

- ``일반 하위 도메인``은 경쟁 우위의 원천이 될 수 없다. 경쟁업체와 동일한 솔루션을 사용하기에 경쟁 우의를 제공할 수 없다.

- ``핵심 하위 도메인``만이 회사에 경쟁 우위를 제공한다. 핵심 하위 도메인은 경쟁사와 차별화하기 위한 회사의 전략이다.

##### 복잡성

- ``지원 하위 도메인``의 비즈니스 로직은 간단하다. 이것은 기본적인 ETL작업과 CRUD인터페이스이며, 비즈니스 로직이 명확하다.

- ``일반 하위 도메인``은 훨씬 더 복잡하다. 지식 가용성 관점에서 일반 하위 도메인은 '알려진 미지'다. 우리가 '모른다는 사실'을 알고 있는 것이다.

- ``핵심 하위 도메인``은 복잡하다. 회사의 수익성이 좌우 되기 때문에  경쟁업체가 최대한 모방하기 어려워야 한다. 그래서 회사는 전략적으로 핵심 하위 도메인으로 복잡한 문제를 해결하려고 한다.

##### 변동성

- ``지원 하위 도메인``은 자주 변경되지 않는다. 지원 하위 도메인은 기업에 어떠한 경쟁 우위도 제공하지 않기 때문에 지원 하위 도메인의 개선은 핵심 하위 도메인에 투자한 동일한 노력에 비해 아주 작은 비즈니스 가치를 제공한다.
- ``일반 하위 도메인``은 시간이 지남에 따라 변경될 수 있다. 보안 패치, 버그 수정 또는 일반적인 문제에 대한 완전히 새로운 소룰션으로 변경될 수 있다.

- ``핵심 하위 도메인``은 앞서 언급했듯이 자주 변경될 수 있다.  한 번의 시도로 문제가 해결될 수 있다면 경쟁자들도 빠르게 따라잡을 수 있기 때문에 경쟁 우위에서 좋은 위치는 아닐 것이다. 기업은 지속적으로 혁신하고 발전한다. 경쟁사보다 앞서기 위해서 핵심 하위 도메인의 지속적인 진화는 필수다. 

##### 솔루션 전략

- ``핵심 하위 도메인``은 사내에서 구현되어야 한다.
- 조직의 숙련된 인재는 핵심 하위 도메인에서 일해야 한다. 또한 사내에서 핵심 하위 도메인을 개발하면 회사가 솔루션을 더 빠르게 변경하고 유지보수가 가능하고 쉽개 개선될 수 있어야 한다.

- ``일반 하위 도메인``은 어렵지만 이미 문제가 해결되었기 때문에 일반 하위 도메인을 사내에서 구현을 하는 것 보다 이미 만들어진 제품을 구입하거나 오픈소스 솔루션을 채택하는 것이 비용 면에서 더 효율적이다.

- ``지원 하위 도메인``에는 정교한 디자인 패턴이나 고급 엔지니어링 기술이 필요 없다. RAD 프레임워크를 사용해 우발적 복잡성 없이 비즈니스 로직을 구현하기에 충분하다. 
- 인력 관점에서도 지원 하위 도메인은 고도로 숙련된 기술이 필요하지 않기에 새로운 인재를 양성할 수 있는 좋은 연습 기회를 제공한다.

![표 1-1](https://ijung.github.io/posts/read-book/learning-domain-driven-design/table-1-1.jpg)

##### 하위 도메인 경계 식별

하위 도메인과 해당 유형을 식별하면 소프트웨어 솔루션을 구축할 때 설계와 관련된 의사결정에 상당한 도움이 된다.

##### 하위 도메인 정제

크게 나눈 하위 도메인은 좋은 출발점이지만, 문제는 세부 사항에 있다.

일반 하위 도메인의 내부 업무를 분석하여 더욱 세분화시키면 다음그림과 같은 상황이 일어날 수 있다.

![image](https://user-images.githubusercontent.com/80632060/182826338-0988757d-228d-4aaf-b3b2-37346a73df85.png)

*하지만 더 세부적인 통찰력을 얻기 위해 도메인을 무한정 세분화 할 수는 없다.*

##### 응집된 유스케이스를 하위 도메인으로

기술적인 관점에서 하위 도메인은 상호 연관되고 응집된 유스케이스의 집합과 유사하다.

세분화된 하위 도메인을 찾는 것을 중단하는 시점을 결정하기 위한 지침으로 '응집된 유스케이스의 집합인 하위 도메인'이라는 정의를 사용할 수 있다.

- 이것은 하위 도메인의 가장 정확한 경계가 된다.

핵심 하위 도메인에는 경계를 식별하기 위한 노력이 반드시 필요하며 가능한 많이 정제하는 것이 중요하다.

##### 핵심에 집중 

모든 조직에는 경쟁 우위를 제공하지만 소프트웨어와는 아무 관련이 없는 비지니스 기능이 꽤나 많다.

하위 도메인을 찾을 때 소프트웨어와 관련되지 않은 비즈니스 기능을 식별하고, 관련된 비즈니스에 집중하는 것이 중요하다.



#### 도메인 전문가

---

``도메인 전문가``는 우리가 모델링하고 코드로 구현할 비즈니스의 모든 복잡성을 알고 있는 전문가다.

- ``도메인 전문가``는 요구사항을 수집하는 분석가도 시스템을 설계하는 엔지니어도 아니다.
- ``도메인 전문가``는 비즈니스를 대표한다.
- ``도메인 전문가``는 요구사항을 제시하는 사람 또는 소프트웨어의 최종 사용자다.
- ``도메인 전문가``의 전문성 범위는 다양하다. 



#### 결론

---

**핵심 하위 도메인** - *흥미로운 문제들.*

 기업이 경쟁자로부터 차별화하고 경쟁 우위를 얻는 활동이다.

**일반 하위 도메인** - *해결된 문제들.* 

이것은 모든 회사가 같은 방식으로 하고 있는 일이다. 여기에는 혁신이 필요하지 않다. 사내 솔루션을 개발하는 것 보다 기존 솔루션을 사용하는 것이 더 효율적이다 

**지원 하위 도메인** - *분명한 해결책이 있는 문제들.* 

사내에서 구현해야 할 활동이지만 경쟁 우위를 제공하지는 않는다.



**도메인 전문가** - 회사의 비즈니스 도메인 또는 하나 이상의 하위 도메인에 대한 심층적인 지식을 가지고 있으며 프로젝트 성공에 매우 중요한 역할을 한다.



#### 느낀점

---

비즈니스 적인 관점에서 정의내린 도메인은 흥미로웠고 도메인 경계 식별의 중요성을 깨달았다.

소프트웨어 개발의 근본적인 부분을 밟아나가는 거 같아서 보람찼다.